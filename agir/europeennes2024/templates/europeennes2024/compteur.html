<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>L'Emprunt populaire !</title>
  <link rel="stylesheet" href="https://use.typekit.net/dqt4vmx.css">
  <style>

    .progress {
      font-family: obviously-narrow, Arial, Helvetica, sans-serif;
    }

    .progress h2 {
      color: #EB622B;
      font-weight: 600;
      font-size: 56px;
      line-height: normal;
      text-transform: uppercase;
    }

    .progress .bar {
      border: 6px dashed #E9335C;
      border-radius: 20px;
      height: 114px;
      display: flex;
      align-items: baseline;
    }

    .progress .bar::before {
      display: none;
    }

    .progress .bar > .text {
      font-weight: bold;
      color: #E51948;
      font-size: 70px;
      position: relative;
      padding: 0 30px;
      margin: 0;
    }

    .progress .bar > .fill {
      border-radius: 30px;
      background-color: #FBEEF4;
      background-clip: content-box;
      padding: 10px;
    }

    @keyframes flottement {
      0% {
        rotate: -7deg;
      }

      50% {
        rotate: 7deg;
      }

      100% {
        rotate: -7deg;
      }
    }

#widget {
  --total-color: #ffec00;
  --prets-color: #04b1db;
  --dons-color: #f731a0;
  display: flex;
  flex-flow: column nowrap;
  font-family: "roc-grotesk", Sans-serif;
  font-weight: bold;
}

#progress {
  box-sizing: border-box;
  border: 4px dashed var(--total-color);
  height: 60px;
  padding: 4px 24px 4px 4px;
  border-radius: 50px;
  margin-bottom: 0.5rem;
}

#progress--total {
  display: flex;
  flex-flow: row nowrap;
  align-items: stretch;
  gap: 4px;
  width: 0;
  height: 100%;
  border-radius: 50px 0 0 50px;
  overflow: hidden;
  transition: width 1s ease-in-out;
}

#progress--prets,
#progress--dons {
  flex: 1 1 0;
  transition: flex-basis 1s ease-in-out;
  line-height: 40px;
  font-size: 22px;
  font-weight: bold;
  padding: 4px 15px;
  color: white;
}

#progress--prets span,
#progress--dons span {
  font-size: 34px;
}

#progress--prets {
  background-color: var(--prets-color);
}

#progress--dons {
  background-color: var(--dons-color);
}

#eu24-amounts {
  display: flex;
  flex-direction: column;
  grid-template-columns: auto auto;
  grid-template-rows: auto auto;
}

#eu24-total-amount-title,
#eu24-amounts > * {
  color: var(--total-color);
  height: auto;
  margin: 0;
  padding: 0;
  font-size: 1rem;
  font-weight: bold;
  padding-left: 24px;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
}

#eu24-total-amount-title {
  font-size: 2.5rem;
}

#eu24-prets-amount {
  color: var(--prets-color);
}

#eu24-dons-amount {
  color: var(--dons-color);
}

    .progress .bar .fill::after {
      content: "";
      display: block;
      position: absolute;

      height: 143px;
      width: 120px;

      bottom: 0;
      right: 0;

      transform-origin: 95px 115px;
      transform: translate(40%, 0%);

      animation: 6s infinite ease-in-out flottement;

      background-image: url("data:image/svg+xml,%3Csvg%20width%3D%22120%22%20height%3D%22143%22%20viewBox%3D%220%200%20120%20143%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%3Cg%20clip-path%3D%22url%28%23clip0_551_109%29%22%3E%0A%3Cpath%20d%3D%22M86.4603%2078.2753L86.434%2077.9697C95.5965%2073.4515%20101.895%2064.0935%20101.895%2053.2755C101.895%2042.717%2095.8972%2033.5448%2087.0899%2028.9108C87.2635%2028.5792%2087.429%2028.2377%2087.5824%2027.8861C91.9698%2017.7751%2092.5914%2010.2388%2089.427%205.48694C87.0052%201.84563%2082.4986%200%2076.0304%200C69.5642%200%2065.0556%201.84563%2062.6338%205.48494C59.6651%209.9452%2060.0344%2016.8583%2063.7156%2026.0465C63.4169%2026.0265%2063.1222%2026.0065%2062.8336%2025.9846C62.4199%2025.9526%2062.0163%2025.9167%2061.6227%2025.8787C61.0011%2025.8208%2060.4058%2025.7569%2059.8407%2025.6949C59.5622%2025.665%2059.2897%2025.633%2059.0274%2025.6051C58.6439%2025.5631%2058.2786%2025.5212%2057.9275%2025.4832C57.7438%2025.4632%2057.5642%2025.4453%2057.3886%2025.4273C56.9406%2025.3833%2056.5228%2025.3474%2056.1394%2025.3254C56.0021%2025.3174%2055.8669%2025.3114%2055.7398%2025.3074C55.5501%2025.3014%2055.3725%2025.2994%2055.2029%2025.3014C54.985%2025.3054%2054.7852%2025.3174%2054.6035%2025.3374C54.4784%2025.3514%2054.3634%2025.3714%2054.2564%2025.3953C54.097%2025.4313%2053.9557%2025.4792%2053.8346%2025.5391C53.6247%2025.643%2053.4774%2025.7868%2053.3967%2025.9766C53.3523%2026.0804%2053.3281%2026.1963%2053.3261%2026.3301C53.32%2026.5758%2053.3846%2026.8714%2053.5238%2027.229C53.6187%2027.4687%2053.7337%2027.6964%2053.8548%2027.9221C53.9456%2028.0919%2054.0405%2028.2596%2054.1293%2028.4314C54.2584%2028.6771%2054.3654%2028.9168%2054.4562%2029.1505C54.5914%2029.504%2054.6863%2029.8436%2054.7408%2030.1772C54.7811%2030.4109%2054.8013%2030.6386%2054.8074%2030.8663C54.8134%2031.1779%2054.7892%2031.4855%2054.7388%2031.7911C54.7125%2031.9529%2054.6782%2032.1147%2054.6379%2032.2765C54.5551%2032.608%2054.4421%2032.9416%2054.3089%2033.2812C54.1959%2033.5688%2054.0607%2033.8644%2053.9174%2034.166C49.102%2039.1237%2046.1434%2045.855%2046.1434%2053.2734C46.1434%2061.0614%2049.4108%2068.0904%2054.658%2073.1059L54.6601%2073.1179C54.987%2082.7216%2050.4421%2089.6167%2042.0203%2089.6167C35.1525%2089.6167%2029.9012%2085.8695%2024.2443%2078.2753C18.5894%2070.6811%2015.5097%2069.4047%2012.5289%2071.0805C10.319%2072.3229%200.00415039%2081.5231%200.00415039%20103.858C0.00415039%20130.24%2027.0718%20143.032%2036.3634%20143.032C42.8276%20143.032%2065.8548%20143.032%2081.6126%20143.032C97.3705%20143.032%20105.853%20125.842%20105.853%20114.251C105.853%20102.658%2094.9446%2090.6673%2086.4603%2078.2753ZM83.877%2027.4687C80.8114%2026.3221%2077.4895%2025.6909%2074.0183%2025.6909C73.6126%2025.6909%2073.209%2025.7029%2072.8074%2025.7189C72.8054%2025.7189%2072.8034%2025.7169%2072.8013%2025.7169C72.7933%2025.7189%2072.7872%2025.7189%2072.7791%2025.7209C71.5925%2025.7728%2070.4239%2025.8947%2069.2817%2026.0884C68.7004%2026.1224%2068.1273%2026.1404%2067.5642%2026.1484C63.8629%2017.4895%2063.1727%2011.0098%2065.5763%207.40048C67.3059%204.80182%2070.8235%203.48552%2076.0304%203.48552C81.2373%203.48552%2084.7549%204.80382%2086.4845%207.40048C88.9204%2011.0598%2088.1818%2017.6673%2084.3452%2026.5059C84.2019%2026.8395%2084.0445%2027.1611%2083.877%2027.4687Z%22%20fill%3D%22%23F6D449%22%2F%3E%0A%3Crect%20x%3D%2299.9077%22%20y%3D%2256.1504%22%20width%3D%2213.3683%22%20height%3D%2213.1351%22%20fill%3D%22url%28%23pattern0%29%22%2F%3E%0A%3Cpath%20opacity%3D%220.2%22%20d%3D%22M104.712%2067.2295C105.461%2067.3853%20106.256%2067.585%20107.064%2067.8287C108.071%2067.4372%20109.088%2066.9998%20110.117%2066.5044C110.722%2066.2128%20111.582%2065.6435%20112.517%2064.8925C112.428%2064.6948%20112.333%2064.497%20112.238%2064.2973C112.042%2064.4111%20111.865%2064.511%20111.701%2064.5889C109.3%2065.7434%20106.947%2066.6083%20104.712%2067.2295Z%22%20fill%3D%22%236C4224%22%2F%3E%0A%3Cpath%20d%3D%22M84.2119%2057.0686C88.7305%2057.0686%2092.3935%2053.445%2092.3935%2048.975C92.3935%2044.505%2088.7305%2040.8814%2084.2119%2040.8814C79.6933%2040.8814%2076.0303%2044.505%2076.0303%2048.975C76.0303%2053.445%2079.6933%2057.0686%2084.2119%2057.0686Z%22%20fill%3D%22white%22%2F%3E%0A%3Cpath%20d%3D%22M85.7351%2055.2949C89.2629%2055.2908%2092.1193%2052.458%2092.1152%2048.9676C92.1111%2045.4773%2089.248%2042.6511%2085.7203%2042.6551C82.1925%2042.6592%2079.3361%2045.492%2079.3402%2048.9824C79.3443%2052.4727%2082.2074%2055.2989%2085.7351%2055.2949Z%22%20fill%3D%22%2349454A%22%2F%3E%0A%3Cpath%20d%3D%22M84.2121%2049.2247C85.6789%2049.2247%2086.868%2048.0478%2086.868%2046.5961C86.868%2045.1443%2085.6789%2043.9674%2084.2121%2043.9674C82.7452%2043.9674%2081.5562%2045.1443%2081.5562%2046.5961C81.5562%2048.0478%2082.7452%2049.2247%2084.2121%2049.2247Z%22%20fill%3D%22white%22%2F%3E%0A%3Cpath%20opacity%3D%220.4%22%20d%3D%22M64.6237%2034.1061C65.0777%2036.6668%2068.434%2035.73%2072.6499%2034.999C76.8658%2034.2679%2080.3431%2034.0182%2079.889%2031.4575C79.435%2028.8968%2075.6509%2027.4127%2071.435%2028.1438C67.219%2028.8748%2064.1696%2031.5434%2064.6237%2034.1061Z%22%20fill%3D%22white%22%2F%3E%0A%3Cg%20opacity%3D%220.5%22%3E%0A%3Cpath%20d%3D%22M0.00610352%20103.856C0.00610352%20130.24%2027.0757%20143.03%2036.3694%20143.03H81.6166C90.9002%20143.03%2097.659%20137.066%20101.647%20129.789C97.9334%20133.129%2093.2392%20136.309%2087.6146%20136.309H42.3674C26.4945%20136.309%206.00409%20122.163%206.00409%2096.1443C6.00409%2085.0046%208.56917%2077.1368%2011.4128%2071.8875C7.98996%2074.7279%200.00610352%2084.2097%200.00610352%20103.856Z%22%20fill%3D%22%23E2AC43%22%2F%3E%0A%3C%2Fg%3E%0A%3Cpath%20d%3D%22M90.4198%2083.8541C89.6105%2084.2795%2088.781%2084.669%2087.9294%2085.0206C87.3017%2085.2783%2086.662%2085.516%2086.0121%2085.7317C84.666%2086.1771%2083.2775%2086.5287%2081.8507%2086.7763C81.0091%2086.9221%2080.1615%2087.032%2079.3098%2087.1039C78.8719%2087.1419%2078.4339%2087.1698%2077.996%2087.1878C77.4834%2087.2098%2076.9687%2087.2178%2076.4561%2087.2118C75.0817%2087.1978%2073.7296%2087.0899%2072.4057%2086.8922C71.4914%2086.7564%2070.5893%2086.5786%2069.7054%2086.3609C68.4077%2086.0413%2067.1463%2085.6358%2065.9253%2085.1504C65.4309%2084.9547%2064.9425%2084.7449%2064.4622%2084.5212C63.8749%2084.2496%2063.2997%2083.96%2062.7346%2083.6504C62.6862%2083.6244%2062.6377%2083.5984%2062.5893%2083.5705C62.1978%2083.3527%2061.8103%2083.127%2061.4309%2082.8933C59.885%2081.9426%2058.4359%2080.852%2057.1019%2079.6395C56.1816%2078.8026%2055.3138%2077.9058%2054.5086%2076.959C54.5469%2076.6334%2054.5792%2076.3038%2054.6055%2075.9662C54.6297%2075.6447%2054.6478%2075.3171%2054.6579%2074.9875C54.666%2074.7318%2054.6721%2074.4742%2054.6721%2074.2145C54.6741%2073.853%2054.668%2073.4874%2054.6539%2073.1199C54.6539%2073.1159%2054.6539%2073.1119%2054.6539%2073.1079C54.0121%2072.4907%2053.3986%2071.8455%2052.8174%2071.1704C52.6922%2071.0246%2052.5671%2070.8768%2052.444%2070.729C52.222%2070.4593%2052.004%2070.1857%2051.7921%2069.908C50.9586%2068.8174%2050.2059%2067.6649%2049.5419%2066.4565C49.447%2066.2827%2049.3522%2066.1089%2049.2614%2065.9332C48.8375%2065.1222%2048.4642%2064.2913%2048.1191%2063.4464C47.8002%2062.6654%2047.5177%2061.8684%2047.2735%2061.0534C47.1524%2060.648%2047.0394%2060.2385%2046.9385%2059.827C46.8093%2059.3077%2046.6963%2058.7844%2046.5994%2058.255C46.5469%2057.9754%2046.5005%2057.6958%2046.4581%2057.4141C46.4238%2057.1924%2046.3935%2056.9687%2046.3653%2056.745C46.2785%2056.0639%2046.218%2055.3727%2046.1816%2054.6776C46.5933%2055.948%2047.0898%2057.1844%2047.6731%2058.3709C48.1756%2059.3996%2048.7407%2060.3963%2049.3582%2061.351C51.2432%2064.2633%2053.6448%2066.816%2056.4359%2068.8854C57.1282%2069.3987%2057.8446%2069.8821%2058.5833%2070.3355C58.6741%2070.3914%2058.7649%2070.4453%2058.8557%2070.5013C59.9253%2071.1405%2061.0394%2071.7117%2062.1938%2072.2111C63.1383%2072.6205%2064.107%2072.9821%2065.0999%2073.2917C67.5257%2074.0487%2070.0888%2074.5001%2072.7407%2074.6C73.112%2074.614%2073.4874%2074.622%2073.8628%2074.622C75.2997%2074.622%2076.7104%2074.5201%2078.0908%2074.3204C80.5873%2073.9608%2082.9788%2073.2897%2085.227%2072.3449C86.0666%2071.9934%2086.884%2071.6019%2087.6811%2071.1764C88.3613%2070.8129%2089.0272%2070.4214%2089.6731%2070.0059C90.9324%2069.199%2092.1231%2068.2961%2093.2371%2067.3114C95.1564%2065.6156%2096.8456%2063.6701%2098.2543%2061.5268C98.9344%2060.4922%2099.5479%2059.4135%20100.093%2058.293C100.829%2056.7749%20101.435%2055.181%20101.895%2053.5291C101.885%2054.6137%20101.812%2055.6843%20101.679%2056.735C101.635%2057.0805%20101.584%2057.4241%20101.528%2057.7657C101.457%2058.1971%20101.374%2058.6246%20101.284%2059.05C101.11%2059.855%20100.9%2060.648%20100.658%2061.425C100.464%2062.0422%20100.25%2062.6514%20100.016%2063.2486C99.5439%2064.4491%2098.9889%2065.6096%2098.3592%2066.7221C97.6791%2067.9246%2096.9082%2069.0711%2096.0606%2070.1517C95.8749%2070.3874%2095.6872%2070.6211%2095.4935%2070.8508C94.1534%2072.4488%2092.6357%2073.8969%2090.9687%2075.1613C90.5449%2075.4829%2090.111%2075.7925%2089.669%2076.0901C89.4248%2076.2539%2089.1766%2076.4157%2088.9263%2076.5715C88.1211%2077.0768%2087.2896%2077.5422%2086.4319%2077.9657C86.44%2078.0695%2086.448%2078.1734%2086.4561%2078.2773C86.9364%2078.9744%2087.4208%2079.6715%2087.9132%2080.3666C88.1413%2080.6902%2088.3713%2081.0118%2088.6014%2081.3353C88.8961%2081.7468%2089.1907%2082.1583%2089.4874%2082.5697C89.7982%2082.9992%2090.109%2083.4266%2090.4198%2083.8541Z%22%20fill%3D%22%23F1C34A%22%2F%3E%0A%3Cpath%20d%3D%22M101.558%2048.975C104.712%2051.0243%20108.073%2052.067%20112.466%2052.3666C115.041%2052.5164%20119.132%2051.8413%20119.889%2054.0904C120.949%2057.3881%20114.2%2063.3844%20111.693%2064.5889C104.042%2068.2622%2096.8618%2069.0751%2092.3936%2068.0325C98.115%2061.2871%20100.791%2056.8389%20101.558%2048.975Z%22%20fill%3D%22%23D24D34%22%2F%3E%0A%3Cpath%20opacity%3D%220.3%22%20d%3D%22M117.334%2053.9865C116.416%2053.1496%20115.425%2054.4619%20114.048%2055.94C112.672%2057.4181%20111.433%2058.5047%20112.351%2059.3416C113.269%2060.1786%20115.128%2059.6572%20116.505%2058.1791C117.881%2056.699%20118.252%2054.8235%20117.334%2053.9865Z%22%20fill%3D%22white%22%2F%3E%0A%3Cg%20opacity%3D%220.7%22%3E%0A%3Cpath%20d%3D%22M76.4217%20104.587C75.4187%20100.692%2073.558%2097.936%2070.8597%2096.9073C67.0716%2095.4612%2063.2613%2096.8414%2060.6659%20100.599C58.3753%20103.914%2056.7567%20109.781%2056.339%20116.288C56.3087%20116.772%2056.2805%20117.159%2056.2603%20117.443C55.891%20117.257%2055.3844%20116.985%2055.0474%20116.77C52.8133%20115.338%2051.2108%20113.124%2050.5307%20110.538C50.2542%20109.481%2050.1533%20107.592%2050.3148%20106.493C50.783%20103.323%2052.5731%20100.652%2055.3602%2098.9547C55.2815%2099.472%2055.3783%20100.013%2055.6508%20100.509C56.0948%20101.314%2056.9303%20101.817%2057.8324%20101.821C57.8385%20101.821%2057.8425%20101.821%2057.8486%20101.821C58.9081%20101.821%2059.5257%20101.316%2060.7224%2099.8995C61.8183%2098.6051%2062.4803%2097.4246%2062.6942%2096.388C62.9243%2095.2754%2062.6538%2094.3206%2061.891%2093.5476C60.9525%2092.5969%2059.5761%2092.3552%2057.558%2092.7866C54.5973%2093.4218%2051.9051%2094.8659%2049.7759%2096.9632C47.6447%2099.0605%2046.1735%20101.717%2045.5176%20104.643C45.4147%20105.105%2045.2794%20106.062%2045.2149%20106.779C44.6034%20113.68%2049.0191%20120.333%2055.7134%20122.6L56.341%20122.812L56.3814%20123.329C56.5549%20125.576%2057.0514%20128.449%2057.5378%20130.009C57.8627%20131.053%2058.4278%20131.689%2059.2673%20131.952C59.5075%20132.028%2059.7578%20132.064%2060.01%20132.064C60.4278%20132.064%2060.8476%20131.962%2061.227%20131.764C61.8264%20131.451%2062.2583%20130.94%2062.4439%20130.328C62.6357%20129.697%2062.5852%20129.322%2062.3168%20128.361C62.0141%20127.282%2061.7537%20125.924%2061.5802%20124.538C61.562%20124.388%2061.5438%20124.252%2061.5277%20124.128C61.4914%20123.855%2061.457%20123.593%2061.451%20123.443C61.5115%20123.439%2061.5882%20123.435%2061.6589%20123.431C61.7335%20123.427%2061.8183%20123.423%2061.9091%20123.417C65.0231%20123.215%2067.9878%20122.085%2070.4823%20120.151C72.9747%20118.22%2074.8254%20115.619%2075.8284%20112.633C76.5025%20110.632%2076.7467%20109.777%2076.7467%20107.55C76.7487%20106.361%2076.6458%20105.458%2076.4217%20104.587ZM61.2956%20118.466C61.3037%20117.521%2061.5035%20114.726%2061.7295%20113.11C62.5691%20107.118%2064.4863%20102.718%2066.7325%20101.625C67.1281%20101.433%2067.231%20101.328%2067.9333%20101.328C68.6357%20101.328%2068.7386%20101.431%2069.1321%20101.623C69.7477%20101.923%2070.2623%20102.518%2070.7507%20103.499C71.2351%20104.472%2071.4752%20105.316%2071.6084%20106.511C71.893%20109.064%2071.0696%20111.92%2069.4046%20114.151C67.79%20116.316%2065.4671%20117.774%2062.8637%20118.26C62.2441%20118.376%2061.6447%20118.444%2061.2956%20118.466ZM93.2552%2094.7201C93.3723%2094.3886%2093.3319%2094.023%2093.1422%2093.7134C92.9303%2093.3659%2092.565%2093.1322%2092.1392%2093.0703C89.6568%2092.7047%2087.3683%2093.9711%2086.4459%2096.2242L86.4399%2096.2422L82.7063%20107.931L82.7023%20107.941C82.1735%20109.749%2081.2875%20112.495%2080.3511%20115.404C79.6649%20117.531%2078.6195%20120.299%2078.0484%20122.141L78.0403%20122.057L76.3188%20114.756C76.2744%20114.569%2076.0181%20114.537%2075.9273%20114.708C75.5095%20115.517%2074.6114%20116.975%2074.0383%20117.699C73.4147%20118.488%2072.6175%20119.277%2072.1896%20119.81C72.0827%20119.942%2072.0484%20120.115%2072.0928%20120.279L74.3329%20128.119C74.5186%20128.782%2074.9061%20129.427%2075.455%20129.987C76.2118%20130.76%2077.2028%20131.283%2078.3228%20131.499L78.9747%20131.625L78.9949%20131.629C79.114%20131.647%2079.233%20131.651%2079.3481%20131.641C79.6891%20131.615%2079.9313%20131.537%2080.1674%20131.321C80.2058%20131.283%2080.234%20131.239%2080.2522%20131.189L88.3208%20108.56L89.5277%20105.177L93.2552%2094.7201Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cpattern%20id%3D%22pattern0%22%20patternContentUnits%3D%22objectBoundingBox%22%20width%3D%221%22%20height%3D%221%22%3E%0A%3Cuse%20xlink%3Ahref%3D%22%23image0_551_109%22%20transform%3D%22scale%280.00362319%200.00367647%29%22%2F%3E%0A%3C%2Fpattern%3E%0A%3CclipPath%20id%3D%22clip0_551_109%22%3E%0A%3Crect%20width%3D%22120%22%20height%3D%22143%22%20fill%3D%22white%22%2F%3E%0A%3C%2FclipPath%3E%0A%3Cimage%20id%3D%22image0_551_109%22%20width%3D%22276%22%20height%3D%22272%22%20xlink%3Ahref%3D%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAARQAAAEQCAYAAABx4YtvAAAACXBIWXMAAC4jAAAuIwF4pT92AAAHOElEQVR4nO3d25ETSRBA0WK8wYE1Y43FDBxYc3Y%2FWIFG05L6kfXIqnO%2BCQJE61ZmSTF8Kwf88%2Fdf%2Fx759Vu%2B%2F%2Fj57ervAYzp0Js7IihbRAbmcPiNXCsq9wQGchoyKI8EBnJIEZRHAgNjOvXGHCEq9wQGxjBFUO6JC%2FQzXVDuiQu0dfoNlyUqN%2BIC9S0TlHviAnVcemNljsqNuECc5YNyT1zgGkF5QlzguMtvmpmjUoqwwBGCcoC4wGuCcoKwwLaQN8aKUbkRF%2FhDUIIICwhKOGFhZWEPv6h8JS6sRlAaEBZWISgNCQuzC33ARWUfYWFWgtKRsDAbQRmAsDCL8AdZVM4TFrITlAEJC1kJysCEhWyqPLCiEktYyEJQEhEWRicoCQkLoxKUxISF0VR7IEWlHWFhFIIyEWGhN0GZkLDQS9UHT1T6ERV6EJTJCQstCcoihIUWBGUxwkJN1R8uURmPqFCLoCxMWIgmKAgLYT56%2FwHoT%2FSJ0uRk8sDmYVrhCkFhk7BwhpWHTQ4BzjCh8JZphb2aPSiikp%2Bw8I6Vh90cCrxjQuEU0wpbTCic4oBgiwmFy0wr3DR9EERlXqJCKVYegjgsKMWEQgWmlXWZUAjn4FiXCYWqTCtrMaFQlUNkLc1PDw%2FYukwr8zOh0IzDZH4mFLowrczJhEIXDpY5mVDozrQyDxMK3Tlk5iEoDEFU5tBl1PTw8IoVKC8TCsNx4OQlKAxJVHISFIYlKvm4QyEF9yo5mFBIwSGUg6CQhqiMz8pDSlagMZlQSMmhNCZBIS1RGY%2BVhylYgcbQ7R9BVIgmKv1ZeZiGQ6o%2FQWEqotKXlYdpWYHaM6EwLYdWe4LC1ESlLUFheqLSjjsUluJepS4TCktxkNUlKCxHVOoRFJYkKnUICssSlXguZaG4rI1iQoHigIsiKPA%2FUbnOz0OBB9af80wo8MCBd56gwAZROcfKA29YgfYzocAbDsD9BAV2EJV9BAV2EpX3BAUOEJXXBAUOEpXnBAVOEJVtggInicpXggIXiMpnzb%2Bw4x%2BAGfny2y8mFAjgoPxFUCCIqAgKhFo9KoICwVaOiktZqGi1y1oTClS02gHatJ6rvbhws8qkYkIBwggKNLDKdC4o0MgKUREUaGj2qDS7KJr9hYQjZr2kNaFAB7MesIICncwYFUEBwggKdDTblNLkYmi2Fw2izXJJa0KBAcxy6AoKDGKGqAgKEEZQYCDZp5TqF0HZXyDoIeslrQkFCCMoMKCsk72gwKAyRqXqnpbxBYHRZLpPMaEAYQQFBpdp0hcUSCBLVKoFJcsLAMQxoUASGQ5pQYFERo%2BKoABhqny%2BPXpFIbtRv5tiQgHCCAokNOoWED42jfoXhRmNtvqYUIAwggKJjbYRCAokN1JUQoMy0l8MaM%2BEAhMY5TAXFCBM2EdOoxQSVtb7Y2QTChBGUGAivTcFQQHChOxbvasIfNbrLsWEAhPqdcgLChDm8lhk3YFxtV59TChAGEGBibXeIAQFCHNpv3J%2FAjm0uksxoQBhBAUW0GqbOB0U6w7wyIQCi2gxBAgKEObUza91B%2FKq%2BYmPCQUIIyiwmJobhqDAgmpF5XBQ3J8Az5hQYFE1hgNBAcIc%2BvjIugPzifwY2YQChBEUWFzk5iEoQJjdu5P7E5hbxF2KCQUIIyhAmF0jjnUH1nB17TGhAGEEBfjt6jYiKECYt0FxfwLsZUIBPrkyRAgKEOblR0TWHVjXmY%2BQTShAGEEBwggKsOnMlcfToLg%2FAY4yoQBhBAV46uimIihAmM3Pmd2fAPf2fifFhAKEERQgjKAAb%2B29BvkSFPcnwFkmFGCXPcOGoABhBAUI8%2BmzZfcnwDuvvpNiQgHCCAoQRlCAQ15djXzs%2BUUAe5hQgMOeDSCCAoQRFCDMRynuT4AYJhTglK1BRFCAMIIChPlwfwJEMaEApz0OJIIChBEUIMyu%2F2vjnjsX4N79z0c5HJQzRAjmdotKk6DsJTyQ05BB2UN0YDxpg%2FKO4EB70wblFbGBOpYMyjNCA9d9%2F%2FHzm6C8IDSwn6CcJDTwlaAEExpWJigNiAyrEJRORIYZCcpARIbsBGVwIkMmgpKMwDAyQUlOYBiNoExGZOhJUCYnMLQkKIsRGGoSlIWJC9EEhd8EhqsEhacEhqMEhV3EhT0EhVMEhi2CwmXiwo2gEEpc1uWr91QlLmsRFJoRl%2FkJCl2Iy5wEhe7EZR6CwlDEJTdBYVjiko%2BgkIK45CAopCMuY%2FJ%2FG5OasIxFUJiGuPQnKExHWPq4xaQUQWFS4tKOoLAUcalLUFiSsMS7j0kpgsKixCWGoMAdYTnvMSalCAr8Ji77bcWkFEGBTeLymqDACcLy1bOYlCIosJu4vI5JKYICp6wYl3cxKUVQ4LIV4rInJqUICoSaMS57Y1KKoEA12eNyJCQ3ggINZIvLmZiUIijQzYiRORuSG0GBQfQMzNWQ3AgKDKxWZKICAlDNf3WK8Y%2FnyQysAAAAAElFTkSuQmCC%22%2F%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A");
    }
  </style>
</head>
<body>
<div id="widget">
  <div id="progress">
    <div id="progress--total">
      <div id="progress--prets"><span></span> de prêts</div>
      <div id="progress--dons"><span></span> de dons</div>
    </div>
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const DATA = "[agir_eu24_dons]";
    const STEPS = [
      10000 * 100,
      50000 * 100,
      100000 * 100,
      200000 * 100,
      500000 * 100,
      750000 * 100,
      1000000 * 100,
      1500000 * 100,
      2000000 * 100
    ];
    const IS_CURRENCY = true;
    const ANIMATION_DURATION = 2000;
    const FRAME_DURATION = 1000 / 60;
    const FRAME_PER_DURATION = Math.round(ANIMATION_DURATION / FRAME_DURATION);

    const easeOutQuart = (x) => 1 - Math.pow(1 - x, 4);
    const formatAmount = (value) =>
      IS_CURRENCY
        ? new Intl.NumberFormat("fr-FR", {
          style: "currency",
          currency: "EUR"
        }).format(Math.round(value) / 100)
        : new Intl.NumberFormat("fr-FR", {
          style: "currency",
          currency: "EUR"
        }).format(value);

    const animate = function (callback, delay) {
      let isActive = true;
      let start;

      const stop = () => {
        isActive = false;
      };

      const animationFrameStep = function (timestamp) {
        if (!isActive) {
          return;
        }

        if (!start) {
          start = timestamp;
          callback();
        }

        const progress = timestamp - start;
        if (progress >= delay) {
          callback();
          start = undefined;
        }

        window.requestAnimationFrame(animationFrameStep);
      };

      window.requestAnimationFrame(animationFrameStep);

      return stop;
    };

    const animateAmount = (target, from, to) => {
      if (from === to) {
        return;
      }
      let frame = 0;
      const stopAnimation = animate(() => {
        frame += 1;
        let currentAmount = from + (to-from) * easeOutQuart(frame / FRAME_PER_DURATION);
        if (to > currentAmount) {
          currentAmount = IS_CURRENCY
            ? Math.min(to, Math.round(currentAmount / 100)) * 100
            : Math.min(to, Math.floor(currentAmount));
          target.innerHTML = formatAmount(currentAmount);
        } else {
          target.innerHTML = formatAmount(to);
          stopAnimation();
        }
      }, FRAME_DURATION);
    };

    const setText = (selector, text, params) => {
      const target = document.querySelector(selector);
      if (target) {
        if (text && params) {
          for (k in params) {
            text = text.replace("${" + k + "}", params[k]);
          }
        }
        target.innerHTML = text;
        target.style.opacity = 1;
        target.style.marginLeft = 0;
        target.style.marginRight = 0;
      }
    };
    const setNumericText = (selector, text) => {
      const elem = document.querySelector(selector);
      if (elem) {
        const from = parseInt(elem.dataset.amount) || 0;
        elem.dataset.amount = text;
        animateAmount(document.querySelector(selector), from, text);
      }
    };

    const setValue = async () => {
      const res = await fetch("{% url "europeennes2024:montant" %}");
      const {dons, prets} = await res.json();
      const total = dons + prets;
      const nextStep = STEPS.find((step) => step > total);
      const progressValue = Math.max(Math.floor((total / nextStep) * 100), 8);

      document.querySelector("#progress--total").style.width =
        progressValue + "%";
      document.querySelector("#progress--prets").style.flexBasis =
        prets + "px";
      document.querySelector("#progress--dons").style.flexBasis =
        dons + "px";
      //setNumericText("#eu24-total-amount span", total);
      setNumericText("#progress--prets span ", prets);
      setNumericText("#progress--dons span", dons);
    };

    setValue();
    setInterval(setValue, 10*1000);
  });

</script>
</body>
</html>
